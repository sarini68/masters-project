{% extends "common/base.html" %}
{% set title="result" %}

{% block head %}
    <script src="/static/js/neovis.js"></script>
{% endblock %}

{% block body %}
    <div class="row m-3">
        <div class="col m-3"><h3>WSA</h3></div>
        <div class="col m-3"><h3>WSA'</h3></div>
    </div>
    <div class="row m-3">
        <div class="col m-3" id="wsa" data-config="{{ db_config }}"></div>
        <div class="col m-3" id="wsa_p" data-config="{{ db_config }}"></div>
    </div>

{% endblock %}

{% block script %}
    <script>

        function loadWsa() {
            var container_id = "wsa";
            var config_as_string = document.getElementById(container_id).dataset.config;
            var config = JSON.parse(config_as_string);

            config.container_id = container_id;
            config.initial_cypher = "MATCH wsi=()-[:works_with]->() RETURN wsi";

            config.labels = {
                "performer": {
                    caption: "name",
                }
            };

            config.relationships = {
                "works_with": {
                    caption: "case"
                }
            };

            // noinspection JSPotentiallyInvalidConstructorUsage
            new NeoVis.default(config).render();
        }

        function loadWsaPrime() {
            var container_id = "wsa_p";
            var config_as_string = document.getElementById(container_id).dataset.config;
            var config = JSON.parse(config_as_string);

            config.container_id = container_id;

            config.labels = {
                "performer": {
                    caption: "name",
                    community: "mark"
                }
            };

            config.relationships = {
                "works_with": {
                    caption: "case"
                }
            };

            // noinspection JSPotentiallyInvalidConstructorUsage
            new NeoVis.default(config).render();
        }


        $(document).ready(function () {
            loadWsa();
            loadWsaPrime();
        });
    </script>
{% endblock %}
